<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadboard</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body data-bs-theme="dark">

    <header class="p-3 bg-success text-white text-center">
        <div class="profile-picture">
            <img src="https://www.gravatar.com/avatar/9356459e6204f54bea0afb1292a0651b?s=150" alt="User" class="rounded-circle my-3">
        </div>
        <h1>Juan Pablo Ruiz</h1>
        <h2>Mi mierda personal</h2>
    </header>

    <main class="container my-3">

        
      

        <h3>Mi vida se está terminando...</h3>

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <hr>

        <div id="countdown"></div>

    </main>

    <footer>
        <p id="visit-count">Cargando contador...</p>
      </footer>

      <script>
        // Función para obtener y actualizar el contador de visitas
        async function updateVisitCount() {
          // Obtener el contenido del archivo visit-count.txt en el repositorio
          const response = await fetch('https://api.github.com/repos/TU_USUARIO/TU_REPOSITORIO/contents/visit-count.txt');
          const data = await response.json();
          const content = atob(data.content);
          let count = parseInt(content);
    
          // Incrementar el contador
          count++;
    
          // Mostrar el contador en la página
          document.getElementById('visit-count').innerText = `Visitas: ${count}`;
    
          // Escribir el nuevo contador en el archivo visit-count.txt en el repositorio
          const encodedContent = btoa(count.toString());
          await fetch('https://api.github.com/repos/juanpabloruiz/Deadboard/contents/visit-count.txt', {
            method: 'PUT',
            headers: {
              Authorization: 'token TU_TOKEN_DE_ACCESO',
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              message: 'Actualizar contador de visitas',
              content: encodedContent,
              sha: data.sha,
            }),
          });
        }
    
        // Llamar a la función updateVisitCount() al cargar la página
        window.onload = function() {
          updateVisitCount();
        };
      </script>

    <script src="js/bootstrap.min.js"></script>
    <script src="script.js"></script>

</body>

</html>